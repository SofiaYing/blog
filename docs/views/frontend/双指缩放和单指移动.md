---
title: 双指缩放和单指移动
date: 2020-3-18
categories:
  - frond-end
tags :
  - drag
---
box-sizing 属性可以被用来调整这些表现:
- content-box  是默认值。content
- border-box content + border + padding

### offsetParent
HTMLElement.offsetParent 是一个只读属性，返回一个指向最近的（指包含层级上的最近）包含该元素的定位元素或者最近的 table,td,th,body元素。
- 在 Webkit 中，如果元素为隐藏的（该元素或其祖先元素的 style.display 为 "none"），或者该元素的 style.position 被设为 "fixed"，则该属性返回 null。
- 在 IE 9 中，如果该元素的 style.position 被设置为 "fixed"，则该属性返回 null。（display:none 无影响。）

### offsetTop、offsetLeft、offsetWidth 及 offsetHeight
对块级元素来说，offsetTop、offsetLeft、offsetWidth 及 offsetHeight 描述了元素相对于 offsetParent 的边界框。
clientHeight = (content height) + (padding top+padding bottom);
offsetHeight = height + padding + border.
注意：当元素设置为display:none;之后，clientHeight和offsetHeight的高度均变为0，因为浏览器不会对display:none的元素进行渲染，所以使用时一定要注意这一点.
![offset]](./images/offset.jpg)
[offsetParent、offsetLeft/offsetTop深度剖析](https://juejin.cn/post/6844903745512275981)

### jQuery offset() VS Element.getBoundingClientRect() VS js offset递归
1. 获取一个元素距离某个元素的距离
```js
function getOffset(element) {
    var elPosX = 0,
        elPosY = 0,
        tempEl = element;
    while (tempEl !== null){
        elPosX += tempEl.offsetLeft;
        elPosY += tempEl.offsetTop;
        tempEl = tempEl.offsetParent;
    }
    return { x: elPosX, y: elPosY };
}
```
2.  jQuery offset() 方法返回匹配元素相对于文档的偏移,不支持display:none元素，不计算<html> margin

3. **Element.getBoundingClientRect()**
Element.getBoundingClientRect() 方法返回元素的大小及其**相对于视口**的位置
- box-sizing: content-box 元素的尺寸等于width/height + padding + border的总和。
- box-sizing: border-box，元素的的尺寸等于 width/height。
关于距离视口位置的计算：会考虑视口区域（或其他可滚动元素）内的滚动操作，如果你需要获得相对于整个网页左上角定位的属性值，那么只要给top、left属性值加上当前的滚动位置（通过 window.scrollX 和 window.scrollY），这样就可以获取与当前的滚动位置无关的值。

`注意`:关于滚动页面
- jQuery offset() 和js原生方法基本一致，但要注意，如果页面包含滚动，但**滚动不在根元素上**，需要自己手动加上滚动距离
- Element.getBoundingClientRect() 获取的是相对于视口的问题，注意根据需要是否添加**滚动距离**。


触摸点
targetTouches：为当前对象上所有触摸点的列表
touches：为当前屏幕上所有触摸点的列表
changeTouches：为涉及当前(引发)事件的触摸点的列表

`注意` touch事件在某些触摸设备上兼容性不好（如windows大屏），可以尝试pointer（pointerup/pointermove/pointerdown）