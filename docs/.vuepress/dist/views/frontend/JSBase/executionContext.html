<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Execution Context</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.ed45d6f2.css" as="style"><link rel="preload" href="/blog/assets/js/app.1db5962f.js" as="script"><link rel="preload" href="/blog/assets/js/3.1bbe9357.js" as="script"><link rel="preload" href="/blog/assets/js/1.222166f1.js" as="script"><link rel="preload" href="/blog/assets/js/14.fc785d8c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1ace9f58.js"><link rel="prefetch" href="/blog/assets/js/11.ccce9168.js"><link rel="prefetch" href="/blog/assets/js/12.d9dff96f.js"><link rel="prefetch" href="/blog/assets/js/13.cf5fb123.js"><link rel="prefetch" href="/blog/assets/js/15.eb5e9423.js"><link rel="prefetch" href="/blog/assets/js/16.89677ba2.js"><link rel="prefetch" href="/blog/assets/js/17.f1332d4a.js"><link rel="prefetch" href="/blog/assets/js/18.b3eec343.js"><link rel="prefetch" href="/blog/assets/js/19.d9b0a160.js"><link rel="prefetch" href="/blog/assets/js/20.4586a557.js"><link rel="prefetch" href="/blog/assets/js/21.e6129d36.js"><link rel="prefetch" href="/blog/assets/js/22.8ce2e549.js"><link rel="prefetch" href="/blog/assets/js/23.cf58413e.js"><link rel="prefetch" href="/blog/assets/js/24.dfde03da.js"><link rel="prefetch" href="/blog/assets/js/25.185ed1f9.js"><link rel="prefetch" href="/blog/assets/js/26.47a79b68.js"><link rel="prefetch" href="/blog/assets/js/27.d8df52e6.js"><link rel="prefetch" href="/blog/assets/js/28.3b385380.js"><link rel="prefetch" href="/blog/assets/js/29.ba435a7e.js"><link rel="prefetch" href="/blog/assets/js/30.cdc379e7.js"><link rel="prefetch" href="/blog/assets/js/31.aa4f5f84.js"><link rel="prefetch" href="/blog/assets/js/32.3003d409.js"><link rel="prefetch" href="/blog/assets/js/33.9aac1052.js"><link rel="prefetch" href="/blog/assets/js/34.16c833fb.js"><link rel="prefetch" href="/blog/assets/js/35.7e485268.js"><link rel="prefetch" href="/blog/assets/js/36.22a8f57a.js"><link rel="prefetch" href="/blog/assets/js/37.1de0e7d6.js"><link rel="prefetch" href="/blog/assets/js/38.bf0a596a.js"><link rel="prefetch" href="/blog/assets/js/39.52d90c38.js"><link rel="prefetch" href="/blog/assets/js/4.85136a32.js"><link rel="prefetch" href="/blog/assets/js/40.57dc98b4.js"><link rel="prefetch" href="/blog/assets/js/41.1402e256.js"><link rel="prefetch" href="/blog/assets/js/42.666249cf.js"><link rel="prefetch" href="/blog/assets/js/43.7c4d96b4.js"><link rel="prefetch" href="/blog/assets/js/44.2758d522.js"><link rel="prefetch" href="/blog/assets/js/45.2713c72c.js"><link rel="prefetch" href="/blog/assets/js/46.f0bd4e84.js"><link rel="prefetch" href="/blog/assets/js/47.d928e82f.js"><link rel="prefetch" href="/blog/assets/js/48.a736c50b.js"><link rel="prefetch" href="/blog/assets/js/49.2885edbc.js"><link rel="prefetch" href="/blog/assets/js/5.9eb0b1a7.js"><link rel="prefetch" href="/blog/assets/js/50.8744a68e.js"><link rel="prefetch" href="/blog/assets/js/51.599a79b0.js"><link rel="prefetch" href="/blog/assets/js/52.cd29a7fa.js"><link rel="prefetch" href="/blog/assets/js/53.79244046.js"><link rel="prefetch" href="/blog/assets/js/54.61763e36.js"><link rel="prefetch" href="/blog/assets/js/55.69f99f50.js"><link rel="prefetch" href="/blog/assets/js/56.3ffccefa.js"><link rel="prefetch" href="/blog/assets/js/57.a2ea7b67.js"><link rel="prefetch" href="/blog/assets/js/58.edb4ccbb.js"><link rel="prefetch" href="/blog/assets/js/59.66c8d611.js"><link rel="prefetch" href="/blog/assets/js/6.1764dd90.js"><link rel="prefetch" href="/blog/assets/js/60.2e9284d1.js"><link rel="prefetch" href="/blog/assets/js/61.105c762b.js"><link rel="prefetch" href="/blog/assets/js/62.bd7b4234.js"><link rel="prefetch" href="/blog/assets/js/63.67201e10.js"><link rel="prefetch" href="/blog/assets/js/64.aff9a9ad.js"><link rel="prefetch" href="/blog/assets/js/65.d8c36ce5.js"><link rel="prefetch" href="/blog/assets/js/66.3f20487a.js"><link rel="prefetch" href="/blog/assets/js/67.ff6621fb.js"><link rel="prefetch" href="/blog/assets/js/68.bb6f68d1.js"><link rel="prefetch" href="/blog/assets/js/69.8beaa58d.js"><link rel="prefetch" href="/blog/assets/js/7.6d0aabe2.js"><link rel="prefetch" href="/blog/assets/js/8.d282ea67.js"><link rel="prefetch" href="/blog/assets/js/9.e7e54ca5.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.ed45d6f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>歪歪</span>
          
        <span data-v-59e6cb88>2020 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frond-end/" class="nav-link"><i class="undefined"></i>
  frond-end
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <h3 class="name" data-v-1fad0c41>
    歪歪
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>41</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>14</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frond-end/" class="nav-link"><i class="undefined"></i>
  frond-end
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Execution Context</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>歪歪</span>
          
        <span data-v-59e6cb88>2020 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Execution Context</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>歪歪</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>6/25/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>base</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="javascript"><a href="#javascript" class="header-anchor">#</a> <strong>JavaScript</strong></h2> <p>JavaScript, a high level, single-threaded, garbage collected, interpreted, or just-in-time compiled, prototype-based, multi-paradigm dynamic language with a non-blocking event loop made famous building websites.</p> <p>It was created in 1995 in just one week by Brendan Ike with the goal of adding an easy to learn scripting language to the Netscape browser. It was originally named Mocha but the genius marketing people of the time wanted it to sound like that sexy new java language.</p> <details class="custom-block details"><summary>an interpreted language</summary> <p>This means we do not have to compile the JavaScript source code before sending it to the browser. An interpreter can take the raw JavaScript code and run it for you.</p></details> <details class="custom-block details"><summary>a dynamically typed language</summary> <p>nlike C and C++. This means variables declared using var can store any type of data type like int, string, boolean and also complex data types like object and array.
The lack of type system is what makes JavaScript slow to run. A statically typed language can produce a much efficient machine code because of the information it has about the data like its type and size.</p></details> <h3 id="javascript-engine"><a href="#javascript-engine" class="header-anchor">#</a> JavaScript Engine</h3> <ul><li><strong>Engine 引擎</strong> 负责JavaScript程序的编译及执行过程。（compilation and execution phase）</li></ul> <details class="custom-block details"><summary>See More</summary> <p>Responsible for the compilation and execution of JavaScript programs.</p> <p>The Engine consists of two main components:</p> <ul><li>Memory Heap — this is where the memory allocation happens</li> <li>Call Stack — this is where your stack frames are as your code executes</li></ul> <p>Like any other programming language, JavaScript runtime has one stack and one heap storage. A heap is a free memory storage unit where you can store memory in random order. Data that is going to persist in for a considerable amount of time go inside the heap. Heap is managed by the JavaScript runtime and cleaned up by the garbage collector.</p> <p>A stack is LIFO (last in, first out) data storage that stores the current function execution context of a program.</p></details> <ul><li><strong>Compiler 编译器</strong> 引擎的好朋友之一，负责语法分析（Parsing,生成抽象语法树AST Abstract Syntax Tree）及代码生成(Code Generation)等脏活累活。</li></ul> <details class="custom-block details"><summary>See More</summary> <p>There are various criteria for optimizing JavaScript code. Before JavaScript code is passed to the interpreter or baseline compiler, it has to first get parsed into an Abstract Syntax Tree (AST) which is a tree-like structure of the code.</p> <p>When we run a JavaScript application, we do not need all the code at the application startup time. For example, if we have a function that is called on the user action, like a button click, that code can be parsed later.</p> <p>Identifying things that need to be parsed immediately and generating machine code is the best strategy for faster application bootstrap.</p></details> <ul><li><strong>Scope 作用域</strong> 引擎的另一位好朋友，负责收集并维护由所有声明的标识符（变量 varibale）组成的一系列查询(variable lookups)，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。</li></ul> <details class="custom-block details"><summary>See More</summary> <p>Scope in JavaScript refers to the accessibility /ək,sesə'biləti/（可访问性） or visibility of variables. That is, which parts of a program have access/ˈækses/ to the variable or where the variable is visible.</p> <blockquote><p><font color="#000">access</font> <em>the right to enter a place, use something, see someone etc</em></p></blockquote></details> <p>比起需要三个步骤的传统编译语言（Tokenizing/Lexing 分词/词法分析；Parsing 解析/语法分析；Code Generation 代码生成），JavaScript引擎要复杂的多，大部分情况下编译发生在代码执行前的几微秒时间内，在所要讨论的作用域背后，JavaScript引擎用尽了各种办法来保证性能最佳。</p> <ul><li>第一步：V8 引擎刚拿到 执行上下文 的时候，会把代码从上到下一行一行的先做分词/词法分析(Tokenizing/Lexing)。分词是指：比如 var a = 2; 这段代码，会被分词为：var a 2和;这样的原子符号(atomic token)；词法分析是指：登记变量声明、函数声明、函数声明的形参</li> <li>第二步：在分词结束以后，会做代码解析，引擎将 token 解析翻译成一个 AST(抽象语法树)， 在这一步的时候，如果发现语法错误，就会直接报错不会再往下执行</li> <li>第三步：引擎生成 CPU 可以执行的机器码
在第一步里有个词法分析，它用来登记变量声明、函数声明、函数声明的形参，后续代码执行的时候就知道去哪里拿变量的值和函数了，这个登记的地方就是Lexical Environment(词法环境)</li></ul> <p><img src="/blog/assets/img/compileAndInterpret.ef7b3f81.png" alt="编译执行"></p> <h2 id="execution-context-执行上下文"><a href="#execution-context-执行上下文" class="header-anchor">#</a> <strong>Execution Context 执行上下文</strong></h2> <p>Simply put, an execution context is an abstract concept of an environment where the Javascript code is evaluated and executed. Whenever any code is run in JavaScript, it’s run inside an execution context.</p> <p>ES3</p> <ul><li>scope: 作用域，也常常被叫做作用域链（Scope Chain）</li> <li>variable object：变量对象，用于存储变量的对象</li> <li>this value：this值</li></ul> <p>ES5</p> <ul><li>lexical environment: 词法环境，获取变量时使用</li> <li>variable enviroment: 变量环境，声明变量时使用</li> <li>this value</li></ul> <p>ES2018 （this值被归入lexical environment）</p> <ul><li>lexical environment：词法环境，获取变量或this值时使用</li> <li>variable environment</li> <li>code evaluation state</li> <li>Function</li> <li>ScriptOrMoudle</li> <li>Realm</li> <li>Generator</li></ul> <h3 id="typeof-of-execution-context-执行上下文类型"><a href="#typeof-of-execution-context-执行上下文类型" class="header-anchor">#</a> <strong>Typeof of Execution Context 执行上下文类型</strong></h3> <p>JavaScript的可执行代码（executable code）只有三种：全局代码、函数代码、eval代码</p> <ul><li>Global Execution Context</li> <li>Functional Execution Context</li> <li>Eval Function Execution Context</li></ul> <h3 id="execution-context-stack-esc-call-stack-调用栈"><a href="#execution-context-stack-esc-call-stack-调用栈" class="header-anchor">#</a> <strong>Execution Context Stack (ESC)/ Call Stack 调用栈</strong></h3> <p>当一段代码被执行时，JavaScript 引擎先会对其进行编译，并创建执行上下文</p> <ul><li>当 JavaScript 执行全局代码的时候，会编译全局代码并创建全局执行上下文，而且在整个页面的生存周期内，全局执行上下文只有一份。</li> <li>当调用一个函数的时候，函数体内的代码会被编译，并创建函数执行上下文，一般情况下，函数执行结束之后，创建的函数执行上下文会被销毁。</li> <li>当使用 eval 函数的时候，eval 的代码也会被编译，并创建执行上下文。</li></ul> <p>Execution context stack, also known as “call stack” in other programming languages, is a stack with a LIFO (Last in, First out) structure, which is used to store all the execution context created during the code execution.</p> <p>When the JavaScript engine first encounters your script, it creates a global execution context and pushes it to the current execution stack. Whenever the engine finds a function invocation, it creates a new execution context for that function and pushes it to the top of the stack.</p> <p>The engine executes the function whose execution context is at the top of the stack. When this function completes, its execution stack is popped off from the stack, and the control reaches to the context below it in the current stack.</p> <p>Each entry in the Call Stack is called a Stack Frame.</p> <p>Once all the code is executed, the JavaScript engine removes the global execution context from the current stack.</p> <h2 id="how-is-the-execution-context-created"><a href="#how-is-the-execution-context-created" class="header-anchor">#</a> <strong>How is the Execution Context created?</strong></h2> <p>The execution context is created in two phases: <strong>1) Creation Phase(内存创建)</strong> and <strong>2) Execution Phase（代码执行）</strong>.</p> <h3 id="creation-phase"><a href="#creation-phase" class="header-anchor">#</a> <strong>Creation Phase</strong></h3> <p><strong>Lexical Environment</strong></p> <p>Simply put, A lexical environment is a structure that holds identifier-variable mapping. (here identifier refers to the name of variables/functions, and the variable is the reference to actual object [including function object and array object] or primitive value).</p> <p>The lexical environment is basically data structure keeps the variable and their value reference in memory so that it can easily find it for execution context.</p> <p><strong>Each Lexical Environment has three components</strong></p> <ul><li>Environment Record</li></ul> <details class="custom-block details"><summary>See More</summary> <p>The environment record is the place where the variable and function declarations are stored inside the lexical environment.</p></details> <ul><li>Reference to the outer envrionment</li></ul> <details class="custom-block details"><summary>See More</summary> <p>The reference to the outer environment means it has access to its outer lexical environment. That means that the JavaScript engine can look for variables inside the outer environment if they are not found in the current lexical environment.</p></details> <ul><li>This binding</li></ul> <details class="custom-block details"><summary>See More</summary> <p>In this component, the value of this is determined or set.</p> <p>In the global execution context, the value of this refers to the global object. (in browsers, this refers to the Window Object).</p> <p>In the function execution context, the value of this depends on how the function is called. If it is called by an object reference, then the value of this is set to that object, otherwise, the value of this is set to the global object or undefined(in strict mode).</p></details> <p><strong>Variable Environment</strong><br>
In ES6, one difference between LexicalEnvironment component and the VariableEnvironment component is that the former is used to store function declaration and variable (let and const) bindings, while the latter is used to store the variable (var) bindings only.</p> <h3 id="execution-phase"><a href="#execution-phase" class="header-anchor">#</a> <strong>Execution Phase</strong></h3> <p>In this phase assignments to all those variables are done and the code is finally executed.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> c<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> e <span class="token operator">*</span> f <span class="token operator">*</span> g<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
c <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When the above code is executed, the JavaScript engine creates a global execution context to execute the global code.</p> <ul><li>creation phase</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>GlobalExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">LexicalEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token operator">&lt;</span> uninitialized <span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token comment">//the variables remain uninitialized (in case of let and const).</span>
      <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token operator">&lt;</span> uninitialized <span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">multiply</span><span class="token operator">:</span> <span class="token operator">&lt;</span> func <span class="token operator">&gt;</span> <span class="token comment">//the function declaration is stored in its entirety in the environment</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">VariableEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// the variables are initially set to undefined (in case of var) or remain uninitialized (in case of let and const).</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>execution phase</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>GlobalExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">LexicalEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>    
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">//During the execution phase, if the JavaScript engine couldn’t find the value of let variable at the actual place it was declared in the source code, then it will assign it the value of undefined.</span>
      <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      <span class="token literal-property property">multiply</span><span class="token operator">:</span> <span class="token operator">&lt;</span> func <span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">VariableEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// Identifier bindings go here</span>
      <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When a call to function multiply(20, 30) is encountered, a new function execution context is created to execute the function code.</p> <ul><li>creation phase</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>FunctionExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">LexicalEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// Identifier bindings go here</span>
      <span class="token literal-property property">Arguments</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object or <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">VariableEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// Identifier bindings go here</span>
      <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object or <span class="token keyword">undefined</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>execution phase</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>FunctionExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">LexicalEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// Identifier bindings go here</span>
      <span class="token literal-property property">Arguments</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object or <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">VariableEnvironment</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">EnvironmentRecord</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Type</span><span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// Identifier bindings go here</span>
      <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">20</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ThisBinding</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object or <span class="token keyword">undefined</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>After the function completes, the returned value is stored inside c. So the global lexical environment is updated. After that, the global code completes and the program finishes.</p> <h2 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h2> <ol><li><a href="https://medium.com/jspoint/how-javascript-works-in-browser-and-node-ab7d0d09ac2f" target="_blank" rel="noopener noreferrer">How does JavaScript and JavaScript engine work in the browser and node?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0" target="_blank" rel="noopener noreferrer">Understanding Execution Context and Ececution Stack in JavaScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/mqyqingfeng/Blog/issues/4" target="_blank" rel="noopener noreferrer">JavaScript深入之执行上下文栈<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/573310581" target="_blank" rel="noopener noreferrer">深入理解JavaScript——词法环境<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.51cto.com/kaimo313/5588210" target="_blank" rel="noopener noreferrer">浏览器原理 07 调用栈：为什么JavaScript代码会出现栈溢出？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/30/2023, 8:59:54 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#javascript" class="sidebar-link reco-side-javascript" data-v-b57cc07c>JavaScript</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#javascript-engine" class="sidebar-link reco-side-javascript-engine" data-v-b57cc07c>JavaScript Engine</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#execution-context-执行上下文" class="sidebar-link reco-side-execution-context-执行上下文" data-v-b57cc07c>Execution Context 执行上下文</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#typeof-of-execution-context-执行上下文类型" class="sidebar-link reco-side-typeof-of-execution-context-执行上下文类型" data-v-b57cc07c>Typeof of Execution Context 执行上下文类型</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#execution-context-stack-esc-call-stack-调用栈" class="sidebar-link reco-side-execution-context-stack-esc-call-stack-调用栈" data-v-b57cc07c>Execution Context Stack (ESC)/ Call Stack 调用栈</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#how-is-the-execution-context-created" class="sidebar-link reco-side-how-is-the-execution-context-created" data-v-b57cc07c>How is the Execution Context created?</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#creation-phase" class="sidebar-link reco-side-creation-phase" data-v-b57cc07c>Creation Phase</a></li><li class="level-3" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#execution-phase" class="sidebar-link reco-side-execution-phase" data-v-b57cc07c>Execution Phase</a></li><li class="level-2" data-v-b57cc07c><a href="/blog/views/frontend/JSBase/executionContext.html#参考文献" class="sidebar-link reco-side-参考文献" data-v-b57cc07c>参考文献</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/blog/assets/js/app.1db5962f.js" defer></script><script src="/blog/assets/js/3.1bbe9357.js" defer></script><script src="/blog/assets/js/1.222166f1.js" defer></script><script src="/blog/assets/js/14.fc785d8c.js" defer></script>
  </body>
</html>
