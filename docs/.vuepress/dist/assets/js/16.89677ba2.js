(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{423:function(t,a,n){t.exports=n.p+"assets/img/canvasDrawImage.79a705cb.png"},455:function(t,a,n){"use strict";n.r(a);var s=n(2),e=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("由于每个圆都不一样，所以都需要绘制相应的缓存圆。示例中的离屏渲染主要是在动画时，每次重绘不需要再重写绘制这个圆，只要获取cache中的，drawImage后改变位置即可")]),t._v(" "),a("p",[t._v("https://juejin.cn/post/6844903989197144078#heading-4\n链接中的离屏渲染，雪花都是一样大小，new 一个cacheSnow就可以了")]),t._v(" "),a("p",[t._v("Canvas 的默认大小为300像素×150像素（宽×高，像素的单位是px）。可以通过JavaScript动态创建图像（ creates graphics on the fly。"),a("code",[t._v("<canvas>")]),t._v("元素可以像任何一个普通的图像一样（有margin，border，background等等属性）被设计。然而，这些样式不会影响在canvas中的实际图像。当开始时没有为canvas规定样式规则，其将会完全"),a("strong",[t._v("透明")]),t._v("。")]),t._v(" "),a("p",[t._v("canvas 画布自适应方法")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在需要重新适配的时机，进行监听")]),t._v("\ncurrentWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" dpr\ncurrenHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" dpr\n\noldWidth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noldHeight h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//重置width,height会清空画布，所以需要将原画布保存下来")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" newCanvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"canvas"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewCanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewCanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewCanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currenHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncontext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currenHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"drawimage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#drawimage"}},[t._v("#")]),t._v(" drawImage")]),t._v(" "),a("ul",[a("li",[t._v("drawImage(image, dx, dy)")]),t._v(" "),a("li",[t._v("drawImage(image, dx, dy, dw, dh)")]),t._v(" "),a("li",[t._v("drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)\n"),a("img",{attrs:{src:n(423),alt:"canvas drawImage 参数"}})])]),t._v(" "),a("p",[t._v("canvas save & restore\n"),a("a",{attrs:{href:"https://juejin.cn/post/6844903879599996942",target:"_blank",rel:"noopener noreferrer"}},[t._v("理解Canvas Context 的save() 和 restore()"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/fangsmile/p/9530226.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canvas中的save方法和restore方法"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000019514679",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码阅读 基于Canvas+贝塞尔曲线算法的平滑手写板"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/views/frontend/animation/cnblogs.com/Jlay/p/vue_canvas.html"}},[t._v("Vue 前端验证码 - canvas Rem布局自适应 - 跨域问题")]),t._v(" "),a("a",{attrs:{href:"https://segmentfault.com/a/1190000011478657",target:"_blank",rel:"noopener noreferrer"}},[t._v("1"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("版本问题\nrc.1版本\n1.ios无丢图现象\n2.图片以transform缩小到外框里显示时，会有问题，需去掉\n3.注意overflow：hidden\n4.line-height和字号大小相同，才能绘制出单行垂直居中的效果\nrc.5版本 ios有丢图现象，textarea多行合成只垂直居中显示一行\nrc.7版本，issue上作者回答问题提供\n1.textarea/input能处理空格问题及多行文本\n2.似乎也丢图，不好复现\n目前解决方案：可编辑div，或者用div代替input/textarea进行显示\n另：input/textaera有自有的padding，需要注意，还有box-sizing问题")]),t._v(" "),a("p",[t._v("微信头像跨域\nhtml2canvas设置\nuseCORS: true,\n存储头像的img设置\nthis.avatar.crossOrigin = 'anonymous'\nthis.avatar.src = data.headimgurl;")]),t._v(" "),a("p",[t._v('解决页面transform带来的绘制偏移\nvar transformLay = $("#swiper_container").css("transform");\nvar Lay = transformLay.replace(")", "").split(\',\');\n$("#swiper_container").css({ "transform": "", "left": parseInt(Lay[4]), "top": parseInt(Lay[5]) });')])])}),[],!1,null,null,null);a.default=e.exports}}]);